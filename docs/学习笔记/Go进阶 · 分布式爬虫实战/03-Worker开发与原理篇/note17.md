# 17-巨人的肩膀：HTTP协议与Go标准库原理

## 操作系统处理数据包流程

数据包处理过程可以分为7步，具体如下：

1. 数据帧到达网卡，存储到设备的缓冲区（设备缓冲区或DMA到主机内存）。通知操作系统内核处理接收到的数据
2. 网卡设备生产硬中断信号。设备发送中断控制器，中断控制器发送给CPU。CPU接收到信号后，当前执行的任务被打断，转而执行由设备驱动注册的中断处理程序，中断处理程序将处理对应的设备事件。
3. Linux将中断处理程序分为两个部分：上半部和下半部。上半部接收到中断时立即执行，也叫做硬中断。硬中断只做比较紧急的工作。将数据帧加入到内核的输入队列中，通知内核做进一步处理并快速返回。
4. 下半部处理程序中，操作系统会检查并剥离数据包Header,判断当前数据包应该被哪个协议接受，依次传递到上层处理。整个过程还穿插了hook函数，可以提供防火墙和拦截的功能（iptables等工具工作的原理）。

现代操作系统在处理网络协议栈时，链路层Ethernet协议、网络层IP协议、以及传输层TCP协议在当前都是在操作系统内核实现的。而应用层是在用户态，由应用程序实现的。应用程序与操作系统之间交流的接口是通过操作系统提供的Socket
系统调用API完成的。

## HTTP协议解析

略过

## HTTP协议困境

略过

## HTTP请求底层原理

http.Get